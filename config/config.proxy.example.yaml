# CT-System Configuration (Proxy mode with nginx)
# Copy this file to config.yaml for proxy profile usage

# Server configuration
server:
  port: 8080
  tls:
    enabled: false
  timeouts:
    read: 60s
    write: 60s
    idle: 120s
    read_header: 5s
    shutdown_grace: 10s
  limits:
    max_header_bytes: 1048576

# Reverse proxy configuration
proxy:
  enabled: true
  trust_forward_headers: true
  trusted_hops: 1 
  trusted_cidrs:
    - "127.0.0.1/32"
    - "172.16.0.0/12"
  static_via_nginx: true

# Database configuration
database:
  engine: "mysql"
  mysql:
    host: "ct-system-mysql"
    port: 3306
    user: "root"
    password: "root"
    database: "ct_system"
    charset: "utf8mb4"
    parse_time: true
    max_open_conns: 25
    max_idle_conns: 5
    conn_max_lifetime: 300s
    conn_max_idle_time: 60s

# Security configuration
security:
  session_secret: "dev-session-secret-change-in-production"
  csrf_secret: "dev-csrf-secret-change-in-production"
  bcrypt_cost: 10
  session_cookie_name: "ct_session"
  session_cookie_secure: false
  session_cookie_http_only: true
  session_cookie_same_site: "Lax"
  session_max_age: 86400
  remember_me_days: 7

rate_limit:
  login:
    requests_per_minute: 5
    burst: 5
  api:
    requests_per_second: 100
    burst: 100

# Logging configuration
logging:
  level: "debug"  # debug for development
  format: "json"  # json for better parsing in production
  output: "both"  # stdout for docker logs, file for persistence
  error_path: "/app/logs/error.log"  # Absolute path inside container
  max_size_mb: 100
  max_backups: 5
  max_age_days: 30
  compress: true
  access_path: "/app/logs/access.log"
  access_max_size_mb: 50
  access_max_backups: 10
  access_max_age_days: 7
  audit_path: "/app/logs/audit.log"
  audit_max_size_mb: 100
  audit_max_backups: 5
  audit_max_age_days: 30

# Daemon configuration
daemon:
  path: "/home/trader/trader"
  check_interval: 5s

# Application settings
app:
  name: "CT-System"
  version: "1.0.0"
  timezone: "UTC"
  default_language: "en"
